!function(e){"function"==typeof define&&define.amd?define(e):e()}(function(){function e(){return e=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},e.apply(this,arguments)}function t(e,n){return t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},t(e,n)}function n(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function i(e,r,s){return i=n()?Reflect.construct.bind():function(e,n,i){var r=[null];r.push.apply(r,n);var s=new(Function.bind.apply(e,r));return i&&t(s,i.prototype),s},i.apply(null,arguments)}function r(e,t){if(null==e)return{};var n,i,r={},s=Object.keys(e);for(i=0;i<s.length;i++)t.indexOf(n=s[i])>=0||(r[n]=e[n]);return r}function s(e){return!!(e&&e.constructor&&e.call&&e.apply)}function o(e){return"[object Object]"===Object.prototype.toString.call(e)}function a(e){var t,n;return!1!==o(e)&&null!==e&&(void 0===(t=e.constructor)||!1!==o(n=t.prototype)&&!1!==n.hasOwnProperty("isPrototypeOf"))}function c(){var t=[].slice.call(arguments);return new Promise(function(n,i){var r,s=new XMLHttpRequest,o={url:"",type:"GET",data:"",dataType:"json",async:!0,timeout:3e3};2===t.length?(r=e({},o,a(t[1])?t[1]:{})).url=t[0]:r=a(t[0])?e({},o,t[0]):e({},o,{url:t[0]}),r.type||i("You must provide a request type"),r.type=r.type.toUpperCase(),s.open(r.type,r.url),"json"===r.dataType&&("string"!=typeof r.data&&(r.data=JSON.stringify(r.data)),s.setRequestHeader("Content-type","application/json")),"POST"===r.type&&"json"!==r.dataType&&s.setRequestHeader("Content-type","application/x-www-form-urlencoded"),r.headers&&Object.entries(r.headers).forEach(function(e){return s.setRequestHeader(e[0],e[1])}),s.onload=function(){s.status>=400?i(s.responseText):n(s)},s.onerror=function(){i(s.responseText)},r.data?s.send(r.data):s.send()})}var u=navigator.sendBeacon.bind(navigator);function d(e,t){if(navigator.sendBeacon)try{if(!u(e,"string"!=typeof t?JSON.stringify(t):t))throw new Error("Failed to queue beacon")}catch(n){c({url:e,data:t,type:"POST"}).catch(function(e){})}else c({url:e,data:t,type:"POST"}).catch(function(e){})}let l;const h=new Uint8Array(16);function f(){if(!l&&(l="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!l))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return l(h)}const m=[];for(let e=0;e<256;++e)m.push((e+256).toString(16).slice(1));var v={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function p(e,t,n){if(v.randomUUID&&!t&&!e)return v.randomUUID();const i=(e=e||{}).random||(e.rng||f)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=i[e];return t}return function(e,t=0){return(m[e[t+0]]+m[e[t+1]]+m[e[t+2]]+m[e[t+3]]+"-"+m[e[t+4]]+m[e[t+5]]+"-"+m[e[t+6]]+m[e[t+7]]+"-"+m[e[t+8]]+m[e[t+9]]+"-"+m[e[t+10]]+m[e[t+11]]+m[e[t+12]]+m[e[t+13]]+m[e[t+14]]+m[e[t+15]]).toLowerCase()}(i)}function w(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)e[i]=n[i]}return e}var g=function e(t,n){function i(e,i,r){if("undefined"!=typeof document){"number"==typeof(r=w({},n,r)).expires&&(r.expires=new Date(Date.now()+864e5*r.expires)),r.expires&&(r.expires=r.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var s="";for(var o in r)r[o]&&(s+="; "+o,!0!==r[o]&&(s+="="+r[o].split(";")[0]));return document.cookie=e+"="+t.write(i,e)+s}}return Object.create({set:i,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var n=document.cookie?document.cookie.split("; "):[],i={},r=0;r<n.length;r++){var s=n[r].split("="),o=s.slice(1).join("=");try{var a=decodeURIComponent(s[0]);if(i[a]=t.read(o,a),e===a)break}catch(e){}}return e?i[e]:i}},remove:function(e,t){i(e,"",w({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,w({},this.attributes,t))},withConverter:function(t){return e(w({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"}),y=["uid"];function b(t){var n=t;this._values={};var i=function(e){var t,i={fx_matchtype:"mt",fx_network:"n",fx_creative:"c",fx_keyword:"q",fx_placement:"p",fx_aceid:"ac",fx_adposition:"ap",utm_campaign:"utmc",utm_content:"utmct",utm_source:"utms",utm_medium:"utmm",utm_segment:"utmse",gclid:"gclid",gbraid:"gbraid",wbraid:"wbraid",msclkid:"msclkid",fbclid:"fbclid",twclid:"twclid",li_fat_id:"li_fat_id",epik:"epik",pp:"pp",adClickId:"adId"};return Object.entries(null!=(t=null!=e?e:n.urlParams)?t:{}).reduce(function(e,t){var n=t[0],r=t[1];return i[n]?e[i[n]]=r:-1!==n.indexOf("utm")?e[n]=r:0===n.indexOf("fx_")&&(e[n.replace("fx_","")]=r),e},{})},s=function(){var t=this,r=(new Date).getTime(),s=window.localStorage.getItem("__fx"),o=s?JSON.parse(s):null,a=e({uid:g.get("__fx")||g.get("fx_uuid")||p(),sid:p(),pg:g.get("mcfxPGID"),r:document.referrer},o&&r<o.ttl?o:{},i());return void 0!==a.s&&void 0!==a.m||c({type:"POST",url:("https:"==document.location.protocol?"https://":"http://")+"t.marketingcloudfx.com/visitor",data:JSON.stringify(e({referrer:a.r},n.urlParams))}).then(function(n){var r=JSON.parse(n.response);t.set(e({},i(r),{s:r.source,m:r.medium,st:r.term,l:r.location,ip:r.ip}))}).catch(function(e){console.log(e,t._values)}),g.remove("fx_uuid"),this.save(a),a}.bind(this);this.save=function(e){var t=e.uid,i=r(e,y);i.ttl=(new Date).getTime()+6e4*n.options.visitorSessionLength,window.localStorage.setItem("__fx",JSON.stringify(i)),g.set("__fx",t,{path:"/",domain:n.location.cookieDomain,secure:n.options.useSecureCookies,expires:3650})},this.get=function(e){var t=this;return void 0===e&&(e=null),!e||Array.isArray(e)&&!e.length?this._values:Array.isArray(e)?e.reduce(function(e,n){return e[n]=t._values[n],e},{}):this._values[e]},this.set=function(e,t){var n=this;void 0===t&&(t=null),Array.isArray(e)?e.forEach(function(e,i){n._values[e]=Array.isArray(t)&&t[i]?t[i]:t}):a(e)?Object.entries(e).forEach(function(e){n._values[e[0]]=e[1]}):this._values[e]=t,this.save(this._values)},this._values=s()}let E;try{new EventTarget,E=!0}catch(e){E=!1}var L=E?EventTarget:class{constructor(){this.e={}}addEventListener(e,t,n=!1){this.t(e).push(t)}removeEventListener(e,t,n=!1){const i=this.t(e),r=i.indexOf(t);r>-1&&i.splice(r,1)}dispatchEvent(e){return e.target=this,Object.freeze(e),this.t(e.type).forEach(t=>t(e)),!0}t(e){return this.e[e]=this.e[e]||[]}},S=E?Event:class{constructor(e){this.type=e}};class x extends S{constructor(e,t){super(e),this.newState=t.newState,this.oldState=t.oldState,this.originalEvent=t.originalEvent}}const k="active",O="passive",A="hidden",_="frozen",I="terminated",T="object"==typeof safari&&safari.pushNotification,j=["focus","blur","visibilitychange","freeze","resume","pageshow","onpageshow"in self?"pagehide":"unload"],C=e=>(e.preventDefault(),e.returnValue="Are you sure?"),D=[[k,O,A,I],[k,O,A,_],[A,O,k],[_,A],[_,k],[_,O]].map(e=>e.reduce((e,t,n)=>(e[t]=n,e),{})),P=()=>document.visibilityState===A?A:document.hasFocus()?k:O;var R=new class extends L{constructor(){super();const e=P();this.s=e,this.i=[],this.a=this.a.bind(this),j.forEach(e=>addEventListener(e,this.a,!0)),T&&addEventListener("beforeunload",e=>{this.n=setTimeout(()=>{e.defaultPrevented||e.returnValue.length>0||this.r(e,A)},0)})}get state(){return this.s}get pageWasDiscarded(){return document.wasDiscarded||!1}addUnsavedChanges(e){!this.i.indexOf(e)>-1&&(0===this.i.length&&addEventListener("beforeunload",C),this.i.push(e))}removeUnsavedChanges(e){const t=this.i.indexOf(e);t>-1&&(this.i.splice(t,1),0===this.i.length&&removeEventListener("beforeunload",C))}r(e,t){if(t!==this.s){const n=((e,t)=>{for(let n,i=0;n=D[i];++i){const i=n[e],r=n[t];if(i>=0&&r>=0&&r>i)return Object.keys(n).slice(i,r+1)}return[]})(this.s,t);for(let t=0;t<n.length-1;++t){const i=n[t],r=n[t+1];this.s=r,this.dispatchEvent(new x("statechange",{oldState:i,newState:r,originalEvent:e}))}}}a(e){switch(T&&clearTimeout(this.n),e.type){case"pageshow":case"resume":this.r(e,P());break;case"focus":this.r(e,k);break;case"blur":this.s===k&&this.r(e,P());break;case"pagehide":case"unload":this.r(e,e.persisted?_:I);break;case"visibilitychange":this.s!==_&&this.s!==I&&this.r(e,P());break;case"freeze":this.r(e,_)}}},N="https://t.marketingcloudfx.com/visit",U="https://t.marketingcloudfx.com/event";function M(t){var n=t,i=null;this.id=p(),this.timeLive=0,this.enteredAt=(new Date).getTime(),this.lastEventAt=null,this.windowState="active",this.ttl=(new Date).getTime()+9e5;var r=function(e){void 0===e&&(e={});var t=e.forceNewVid,i=void 0!==t&&t,r=n.visitor.get("sid");return n.regenerateSession(),!(i||r!==n.visitor.get("sid")||(new Date).getTime()>this.ttl)||(this.id=p(),this.timeLive=0,this.enteredAt=(new Date).getTime(),!1)}.bind(this),s=function(e){this.windowState="active",r({forceNewVid:!0}),this.send()}.bind(this),o=function(){this.ttl=(new Date).getTime()+9e5}.bind(this),a=function(e){var t=e.newState,s=e.oldState;n.visitor.get("sid");var o=r();"passive"===t&&"active"===s||"freeze"===t?(clearTimeout(i),o&&(this.timeLive+=(new Date).getTime()-this.enteredAt,this.send(t))):"active"===t&&(this.timeLive+=(new Date).getTime()-this.enteredAt,this.enteredAt=(new Date).getTime(),c(),this.send(t))}.bind(this),c=function(e){o(),clearTimeout(i),"passive"===this.windowState&&e&&a({newState:"active",oldState:"passive",activityRefresh:!0}),i=setTimeout(function(){o(),a({newState:"passive",oldState:"active",activityRefresh:!0})},3e4)}.bind(this);this.enable=function(){this.enabled=!0,this.id=p(),this.enteredAt=(new Date).getTime(),this.timeLive=0,this.windowState="active",o(),this.listen(),this.send()},this.disable=function(){this.enabled=!1,this.id=null,this.enteredAt=null,this.timeLive=0,this.stop()},this.listen=function(){c(),R.addEventListener("statechange",a),window.addEventListener("popstate",s),window.addEventListener("pushState",s),window.addEventListener("replaceState",s),document.addEventListener("scroll",c),document.addEventListener("mousemove",c),document.addEventListener("click",c),document.addEventListener("dblclick",c),document.addEventListener("input",c)},this.stop=function(){R.removeEventListener("statechange",a),window.removeEventListener("popstate",s),window.removeEventListener("pushState",s),window.removeEventListener("replaceState",s),document.removeEventListener("scroll",c),document.removeEventListener("mousemove",c),document.removeEventListener("click",c),document.removeEventListener("dblclick",c),document.removeEventListener("input",c)},this.send=function(e,t){void 0===e&&(e="active"),"function"==typeof e&&(t=e,e="active"),t=t||n.options.onViewCallback,o(),this.lastEventAt=(new Date).getTime(),this.windowState=e;var i=this.prepareParams(e);if(navigator.sendBeacon)d(N,JSON.stringify(i));else{var r=new Image(1,1),s=Object.entries(i).map(function(e){return e[0]+"="+encodeURIComponent(e[1])}).join("&"),a=N+"?"+s;r.onLoad=function(){},r.src=a}t&&"function"==typeof t&&t(e,i)},this.prepareParams=function(t){var i=e({a:n.options.siteId,vid:this.id,o:n.location.origin,u:n.location.href,te:this.enteredAt,tl:this.timeLive,t:document.title},n.visitor.get(),{ttl:this.ttl});return delete i.l,i}}function F(e){if(e.getAttribute("id"))return"#"+e.getAttribute("id");if(e.className&&""!==e.className)return J(e.className);if(e.getAttribute("name"))return'[name="'+e.getAttribute("name")+'"]';var t=Array.from(e.parentElement.children).filter(function(t){return t.tagName===e.tagName});return t.indexOf(e)?e.tagName+":nth-of-type("+(t.indexOf(e)+1)+")":""+e.tagName}function J(e){if(!e)return e;for(var t="."+e;-1!==t.indexOf(" ");)t=t.replace(" ",".");return t}function B(e){for(var t="";e.parentElement;)t=F(e)+(t?" > ":"")+t,e=e.parentElement;return"html > "+t.toLowerCase()}function q(t){return e({},t.getAttributeNames().reduce(function(n,i){var r;return e({},n,((r={})[i]=t.getAttribute(i),r))},{}),{id:t.getAttribute("id")?""+t.getAttribute("id"):null,class:t.className&&""!==t.className?J(t.className):null,name:t.getAttribute("name")?""+t.getAttribute("name"):null,xpath:B(t)})}function V(t){var n=t,i={},r=function(e){this.capture(e.target)}.bind(this);this.enable=function(){this.enabled=!0,this.listen(),i=JSON.parse(window.sessionStorage.getItem("fxFormSessions")||"{}")},this.disable=function(){this.enabled=!1,this.id=null,this.enteredAt=null,this.stop()},this.listen=function(){window.addEventListener("submit",r,!0)},this.stop=function(){window.removeEventListener("submit",r)},this.formAttributes=function(t){return e({},q(t),{fxId:this.key(t)})},this.capture=function(e){if(!1!==(!n.options.onFormCapture||n.options.onFormCapture.call(event))){var t=n.options.trackInputs,i=t?function(e,t){if(void 0===t&&(t=!1),!e)throw new Error("You must provide a form.");var n=new FormData(e),i=Object.entries(Object.fromEntries(n)).reduce(function(e,t){var n=t[1];return e[t[0].toLowerCase()]=n,e},{});return Array.from(e.elements).forEach(function(e){var t=(""+e.type).toLowerCase(),r=e.name?e.name.toLowerCase():null;["submit","reset","button"].includes(t)||("checkbox"!==t&&"SELECT"!==e.nodeName||(i[r]=n.getAll(e.name)),r&&void 0===i[r]&&(i[r]=null))}),t?i:function(e,t){return Object.entries(e).reduce(function(e,n){var i,r=n[0],s=n[1],o=s;return(t&&"password"===(""+(null==(i=t.elements[r])?void 0:i.type)).toLowerCase()||/password/.test(r)||/pin[_-]?(num(ber)?)?/.test(r)||/credit[_-]?card/.test(r)||/card[_-]?number/.test(r)||/cc[_-]?num(ber)?/.test(r)||/cvv/.test(r)||function(e){if(/[^0-9-\s]+/.test(e))return!1;if(String(e).length<12||String(e).length>19)return!1;for(var t=0,n=0,i=!1,r=(e=e.replace(/\D/g,"")).length-1;r>=0;r--){var s=e.charAt(r);n=parseInt(s,10),i&&(n*=2)>9&&(n-=9),t+=n,i=!i}return t%10==0}(s)||/^\d{3}-\d{2}-\d{4}$/.test(s)||/social[_-]?(security)?[_-]?(num(ber)?)?/.test(r))&&(o="".padEnd(o.length,"*")),e[r]=o,e},{})}(i,e)}(e):{},r=t?function(e){if(!e)throw new Error("You must provide a form.");return Array.from(e.elements).reduce(function(e,t){var n=(""+t.type).toLowerCase(),i=t.name?t.name.toLowerCase():null;return["submit","reset","button"].includes(n)||(e[i]=n),e},{})}(e):{};this.send(this.formAttributes(e),i,r,this.getSessionId(e))}},this.send=function(e,t,i,r){return r=r||this.getSessionId(),n.send({type:"form",value:{id:r,form:e,values:t,types:i}}),r},this.createKey=function(e){var t=function(e,t){void 0===t&&(t=0);for(var n,i=3735928559^t,r=1103547991^t,s=0;s<e.length;s++)n=e.charCodeAt(s),i=Math.imul(i^n,2654435761),r=Math.imul(r^n,1597334677);return i=Math.imul(i^i>>>16,2246822507)^Math.imul(r^r>>>13,3266489909),4294967296*(2097151&(r=Math.imul(r^r>>>16,2246822507)^Math.imul(i^i>>>13,3266489909)))+(i>>>0)}(q(e).xpath);return e&&e.setAttribute("data-fx-id",t),t},this.key=function(e){var t=e?e.getAttribute("data-fx-id"):"";return t&&""!==t?t:this.createKey(e)},this.getSessionId=function(e){var t,n=this.key(e),r=1*new Date;return i[n]&&r<(null==(t=i[n])?void 0:t.ttl)?i[n].id:this.generateNewSessionId(n)},this.generateNewSessionId=function(e){return i[e]={id:p(),ttl:1*new Date+6e4*(n.options.formSessionLength||10)},window.sessionStorage.setItem("fxFormSessions",JSON.stringify(i)),i[e].id}}function z(t){var n=t,i=this,r=[],s=[],o={x:0,y:0},a=null,u=null,d=null;function l(){if(i.capturing&&!i.paused){var t={session:n.visitor.get("sid"),time:Date.now(),scroll:{x:window.pageXOffset||document.documentElement.scrollLeft,y:window.pageYOffset||document.documentElement.scrollTop},mouse:e({},o),events:s.splice(0,s.length),page:window.location.href,size:{width:window.innerWidth,height:window.innerHeight}};r.push(t)}}function h(e){if(this.lastEventAt=1*new Date,i.resume(),e){var t=e.srcElement||e.target;if((null==t?void 0:t.closest("form"))&&("click"===e.type||"submit"===e.type))return;s.push({type:e.type,el:t?q(t):null,form:t.form?q(t.form):"",value:t.value||""})}}function f(){(1*new Date-this.lastEventAt)/1e3>10&&i.pause()}this.capturing=!1,this.paused=!1,this.lastEventAt=null;var m=function(){0!==r.length&&c({url:document.location.protocol+"//recorder.marketingcloudfx.com",type:"POST",data:r.splice(0,r.length)})},v=function(e){return h()},p=function(e){o.x=e.pageX,o.y=e.pageY,h(e)},w=function(e){var t=e.oldState;"active"!==e.newState?(i.pause(),l(),m()):"active"!==t&&h()};function g(){a=setInterval(l,50),u=setInterval(m,6e4),d=setInterval(f,1e3)}function y(){clearInterval(a),clearInterval(u),clearInterval(d)}this.enable=function(){this.enabled=!0},this.disable=function(){this.enabled=!1},this.listen=function(){document.addEventListener("scroll",v),document.addEventListener("mousemove",p),document.addEventListener("click",p),document.addEventListener("dblclick",p),document.addEventListener("focusin",h),document.addEventListener("focusout",h),n.options.trackInputs&&(document.addEventListener("input",h),document.addEventListener("change",h)),R.addEventListener("statechange",w),window.addEventListener("popstate",m),window.addEventListener("pushState",m),window.addEventListener("replaceState",m),window.addEventListener("pagehide",m),this.capturing=!0,this.paused=!1,this.lastEventAt=1*new Date,g()},this.stop=function(){document.removeEventListener("scroll",v),document.removeEventListener("mousemove",p),document.removeEventListener("click",p),document.removeEventListener("dblclick",p),document.removeEventListener("focusin",h),document.removeEventListener("focusout",h),n.options.trackInputs&&(document.removeEventListener("input",h),document.removeEventListener("change",h)),R.removeEventListener("statechange",w),window.removeEventListener("popstate",m),window.removeEventListener("pushState",m),window.removeEventListener("replaceState",m),this.capturing=!1,this.paused=!1,y()},this.pause=function(){!0!==this.paused&&(this.paused=!0,m(),y())},this.resume=function(){!1!==this.paused&&(this.paused=!1,g())}}function H(e){this.enabled=!1,this.el=null,this.reviews=[],this.ready=!1,this.retried=0,this.enable=function(){this.enabled=!0,this.fetch()},this.disable=function(){this.enabled=!1},this.fetch=function(){var t=this;return Promise.resolve(function(n,i){try{var r=Promise.resolve(c(("https:"===document.location.protocol?"https://":"http://")+"cdn.leadmanagerfx.com/reviews/"+e.options.siteId+"/")).then(function(e){var n;if(e){var i=JSON.parse(e.response);t.el=i.selector,t.reviews=i.reviews,t.ready=!0,t.el&&null!=(n=t.reviews)&&n.length&&t.render()}})}catch(e){return}return r&&r.then?r.then(void 0,function(){}):r}())},this.render=function(){var e=document.getElementById(this.el);if(e)e.innerHTML='\n    <div class="mcfx-reviews">\n      '+this.reviews.map(this.renderOne).join("")+"\n    </div>\n    ";else{var t=this;retried<2&&setTimeout(function(){t.retried++,t.render()},2e3)}},this.renderOne=function(e){for(var t='\n    <div class="mcfx-review" itemprop="review" itemscope itemtype="http://schema.org/Review">\n      <span class="mcfx-review-author" itemprop="author">'+e.author_name+'</span>\n      <span class="mcfx-review-date" itemprop="datePublished">'+e.date+'</span>\n      <div itemprop="reviewRating" itemscope itemtype="http://schema.org/Rating">\n        <meta itemprop="worstRating" content = "1"/>\n        <span class="mcfx-review-number-rating">\n          <span class="mcfx-review-rating" itemprop="ratingValue">'+e.rating+'</span>/\n          <span class="mcfx-review-max" itemprop="bestRating">5</span> stars\n        </span>\n        <span class="mcfx-review-stars">\n    ',n=1;n<=5;n++)e.rating>=n&&(t+='<span class="mcfx-star mcfx-star-active"></span>');return t+'\n        </span>\n      </div>\n      <span class="mcfx-review-description" itemprop="reviewBody">'+e.text+"</span>\n    </div>"}}function Y(e){try{var t=new URL(null!=e?e:window.location.href),n=t.hostname,i={hostname:n,href:t.href,origin:t.origin,pathname:t.pathname,search:t.search,protocol:t.protocol,hash:t.hash,domain:"",subdomain:"",tld:"",cookieDomain:""};return n&&(i.domain=function(e){for(var t=document.domain,n=0,i=t.split("."),r="km_"+(new Date).getTime();n<i.length-1&&-1==document.cookie.indexOf(r+"="+r);)t=i.slice(-1-++n).join("."),document.cookie=r+"="+r+";domain="+t+";";return document.cookie=r+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;domain="+t+";",t}(),i.subdomain=n.replace(i.domain,"").split(".").filter(function(e){return e}).join("."),i.cookieDomain="."+i.domain),i}catch(e){return null}}function X(e){return Object.fromEntries(new URLSearchParams(e||window.location.search))}V.prototype.keyForms=function(){var e=this;Array.from(document.forms).forEach(function(t){e.createKey(t)})};var G=["visitTracking","leadTracking","visitorRecording","reviewIntegration"],K=function(e){var t=history[e];return function(){var n=t.apply(this,arguments),i=new Event(e);return i.arguments=arguments,window.dispatchEvent(i),n}};window.history.pushState=K("pushState"),window.history.replaceState=K("replaceState");var W=["r","ttl"];function $(t){void 0===t&&(t={}),a(t)||(t={siteId:t}),this.options=e({modules:["view","forms","stream","reviews"],formSessionLength:10,visitorSessionLength:30,trackInputs:!0,useSecureCookies:!0},t),0===(""+t.siteId).toLowerCase().indexOf("ns-")&&(this.options.modules=this.options.modules.filter(function(e){return!["stream","reviews"].includes(e)}));var n=function(e){this.location=Y(),this.urlParams=X()}.bind(this);window.addEventListener("pushState",n),window.addEventListener("replaceState",n),this.location=Y(),this.urlParams=X(),this.visitor=new b(this),this.modules={view:new M(this),forms:new V(this),stream:new z(this),reviews:new H(this)},this.send=function(){var t=[].slice.call(arguments),n=e({a:this.options.siteId,o:window.location.origin,u:window.location.href},this.visitor.get());if(1===t.length&&a(t[0]))return"page"===t[0].hitType||"page"===t[0].type?void this.modules.view.send():(t[0].hitType&&(t[0].type=t[0].hitType),void d(U,e({type:"event",category:null,action:null,label:null,value:null},t[0],{attrib:n})));"page"!==t[0]?d(U,{type:t[0]||"event",category:t[1]||null,action:t[2]||null,label:t[3]||null,value:t[4]||null,attrib:n}):this.modules.view.send()},this.capture=function(e){this.modules.forms&&this.modules.forms.enabled&&this.modules.forms.capture(e)},this.configure=function(e,t){var n=this;void 0===t&&(t=null),Array.isArray(e)?e.forEach(function(e,i){n.options[e]=Array.isArray(t)&&t[i]?t[i]:t}):a(e)?Object.keys(e).forEach(function(t){n.options[t]=e[t]}):this.options[e]=t},this.set=function(){var e;(e=this.visitor).set.apply(e,[].slice.call(arguments))},this.get=function(){var e;(e=this.visitor).get.apply(e,[].slice.call(arguments))},this.enableModule=function(e){var t=this;void 0===e&&(e=[]),Array.isArray(e)||(e=[e]),e.forEach(function(e){t.modules[e]&&!t.isModuleEnabled(e)&&t.modules[e].enable()})},this.disableModule=function(e){var t=this;void 0===e&&(e=[]),Array.isArray(e)||(e=[e]),e.forEach(function(e){t.modules[e]&&t.isModuleEnabled(e)&&t.modules[e].disable()})},this.isModuleEnabled=function(e){return this.modules[e]&&this.modules[e].enabled},this.regenerateSession=function(){this.visitor=new b(this)},this.decorate=function(t){if(t){Array.isArray(t)||(t=[t]);var n=document.querySelectorAll("a"),i=r(this.visitor.get(),W);n.forEach(function(n){var r=Y(n.href);if(r){var s=X(r.search);t.forEach(function(t){if(-1!==n.href.indexOf(t)){var o=new URLSearchParams(e({},s,Object.entries(i).reduce(function(e,t){var n=t[0],i=t[1];return function(e){return null!=e}(i)&&(e["fx_"+n]=i),e},{}))).toString();n.href=""+r.origin+r.pathname+"?"+o+r.hash}})}})}},this.loadConfig=function(){try{var t,n,i=function(e){if(t)return e;if(n){var i=n.modules,r=s.options.modules.filter(function(e){return!i.includes(e)});s.configure(n),s.disableModule(r),s.enableModule(i)}},s=this,o=s.options.siteId;if(!o)return Promise.resolve();var a=function(t,i){try{var s=Promise.resolve(function(t){try{var n=("https:"==document.location.protocol?"https://":"http://")+"t.marketingcloudfx.com/config?siteId="+t;return Promise.resolve(c(n).catch(function(e){throw console.error("Error encountered",e),e})).then(function(t){if(!t)return null;var n=JSON.parse(t.response).data;if(!Object.keys(n).length)return null;var i=null!=n?n:{},s=i.visitTracking,o=i.leadTracking,a=i.visitorRecording,c=i.reviewIntegration,u=r(i,G),d=[s?"view":null,o?"forms":null,a?"stream":null,c?"reviews":null].filter(function(e){return null!==e});return e({},u,d.length?{modules:d}:{})})}catch(e){return Promise.reject(e)}}(o)).then(function(e){n=e})}catch(e){return i()}return s&&s.then?s.then(void 0,i):s}(0,function(){t=1});return Promise.resolve(a&&a.then?a.then(i):i(a))}catch(e){return Promise.reject(e)}},this.enableModule(this.options.modules),this.loadConfig()}var Q=window.mcfx||{},Z=Q.q,ee=Q.e;window.mcfx=function(){var e,t=[].slice.call(arguments),n=t[0],r=t.slice(1);if(!this.tracker&&"create"===n)return this.tracker=i($,r),void(this.tracker.modules.view.enteredAt=ee);if(!this.tracker)throw new Error("MarketingCloudFX Tracker has not been configured. Please call create before other methods.");s(n)?n.apply(void 0,[this.tracker].concat(r)):this.tracker[n]&&(e=this.tracker)[n].apply(e,r)},Z&&Z.forEach(function(e){var t;return(t=window).mcfx.apply(t,e)})});
//# sourceMappingURL=mcfx.js.map
